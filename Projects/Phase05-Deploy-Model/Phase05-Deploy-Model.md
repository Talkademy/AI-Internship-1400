<div dir="rtl" align='right'>

# عملیاتی کردن مدل ها
  
  خب تا اینجا کلی مدل سازی برای تشخیص عکس، کلاس بندی جمله، تعیین قطبیت جمله و ... . ولی اگه خواستیم از سرویس دیگه ای به این مدل ها دسترسی داشته باشیم چیکار باید بکنیم؟ مثلا فرض کن میخوایم توی پنل سایت ببینیم چقدر از بازخوردهایی که برای محصولات دریافت میکنیم مثبت هست و چقدرشون منفی.
  یک راه اینه که داخل کدهای بکند سایت، مدل خودمون رو تعبیه کنیم. ولی این راه درستی نیست. بنظرت چرا راه درستی نیست؟ دلایلش رو توی ایشوها بنویس.
  راه درست اینه که یک سرویس مجزا برای مدل خودمون درست کنیم و از طریق درخواست های API داده ها رو به مدل بفرستیم و نتیجه پردازشش رو دریافت کنیم.
  برای این کار لازمه که یک برنامه سرور بنویسیم که درخواست ها رو دریافت کنه، اون ها رو به مدل هوش مصنوعی ما بده و نتایج رو به کاربر برگردونه. شاید تا حالا اسم Django یا Flask یا FastAPI یا چیزای دیگه به گوشت خورده یا باهاشون حتی کار کرده باشی.
  برای سادگی کار، ما از فریمورک Flask برای ارائه و عملیاتی کردن مدل ها میخوایم استفاده کنیم.
  کار با فلسک خیلی ساده ست و به دانش خاصی احتیاج نداره. 
  
  اول فلسک رو نصب کن. برای نحوه نصب به سایتش مراجعه کن. برای شروع سریع می تونی از این 
  [لینک](https://flask.palletsprojects.com/en/2.0.x/quickstart/#a-minimal-application)
  استفاده کنی.
  حالا که برنامه Hello-World رو نوشتی، یه برنامه فلسک بنویس که کاربر جمله رو بده و توی خروجی، احساس جمله رو برگردونی.
  برای ارتباط به برنامه و ارسال و دریافت داده، میتونی از خط فرمان و دستور  curl استفاده کنی. ولی توصیه میکنیم که از برنامه ی Postman برای این کار بهره ببری.
  
  داده ها رو به شکل JSON ارسال و دریافت کن. مثلا:
  
  ```
  Request:
  {
  "text": "من خیلی خوشحالم!"
  }
  
  Response:
  {
  "text": "من خیلی خوشحالم",
  "Sentiment": "Positive"}
  ```
  
  تسک بعدی اینه که عکس بفرستی و مدلی که قبلا آموزش دادی، کلاس عکس رو پیش بینی کنه و خروجی بده. کدی که توسعه میدی باید تو شرایط زیر درست کار کنه:
  1. فرمت عکس مهم نباشه که PNG هست یا JPG یا چیز دیگه
  2. اندازه عکس مهم نباشه. مثلا اگه مدلی که توسعه داده عکس 256* 256 پیکسل دریافت میکنه، اگه عکس 1024*1024 پیکسل هم فرستادیم به مشکلی نخوره
  3. اگه توی درخواست عکسی نبود، به کاربر پاسخ مناسب بده.
  

## ذخیره سازی اطلاعات
خب تا اینجا یه برنامه نوشتی که از طریق فلسک، درخواست ها رو دریافت میکنه و بهشون جواب میده. تو این مرحله میخوایم که اطلاعاتی که دریافت و ارسال کردیم رو ذخیره کنیم تا بعدا اونا رو بررسی کنیم و ببینیم که چقدر درخواست داشتیم، چه درخواست هایی داشتیم، مدل مون کجا خوب عمل کرده و کجا بد عمل کرده. برای همین نیاز به یه پایگاه داده داریم تا این اطلاعات رو داخلش ذخیره و بعدا بازیابی کنیم.
### انواع پایگاه داده ها
خب همونطور که میدونی، انواع مختلفی پایگاه داده داریم. به طور کلی پایگاه داده ها به دو بخش SQL  و NoSQL تقسیم میشن. در پایگاه داده های SQL داده ها رو بصورت جدولی و ستونی ذخیره میکنن ولی در NoSQL ها داده ها  بصورت سندی ذخیره میشن. برای مطالعه بیشتر تفاوت ها و آشنایی باهاشون، این لینک رو ببین:
[تفاوت SQL و NoSQL](https://roocket.ir/articles/sql-vs-nosql-databases-whats-the-difference)

* در قسمت ایشوها، بصورت لیست تفاوت SQL و NoSQL رو بنویس

از بین این دو نوع پایگاه داده، ما پایگاه داده ی NoSQL رو برای توسعه پروژه ها انتخاب کردیم. چرا؟  چون دیگه نیاز نیست ساختار دقیق جدول ها و رابطه ها رو مشخص کنیم و براشون وقت صرف کنیم، از طرفی هم جنس داده ها و پردازش ها طوریه که ساختار مشخص و ثابتی ندارن؛ مثلا برای یک داده، 4 تا ویژگی استخراج کردیم، برای داده ی دیگه 2 تا. البته این کارها رو هم میشه با پایگاه داده های رابطه ای هم انجام داد، ولی زمان و طراحی بیشتری نیاز داره. برای همین، از نوع NoSQL استفاده میکنیم.

پایگاه داده های NoSQL زیادی وجود داره؛ مثل Cassandra, Redis, MongoDB. یکی از بهترین ها و پر استفاده ترین پایگاه داده ها MongoDB هست. ما هم از این پایگاه داده برای توسعه پروژه های پیش رو استفاده میکنیم.

### نصب MongoDB
نصب این پایگاه داده خیلی آسونه. با توجه به سیستم عاملت، آموزش نحوه نصب رو اینجا میتونی ببینی: 
[آموزش نصب MongoDB](https://docs.mongodb.com/manual/administration/install-community/)

برای اینکه بعدا اطلاعات داخل پایگاه داده رو بتونی به راحتی ببینی، برنامه MongoDB Compass رو هم نصب کن: 
[لینک نصب MongDB Compass](https://docs.mongodb.com/compass/current/install/)
### اتصال به پایگاه داده از پایتون
بعد از اینکه پایگاه داده رو نصب کردی و مطمئن شدی که درست نصب شده و در حال اجراست، بریم سراغ اتصال به پایگاه داده از داخل کدهای پایتون. برای اتصال به این پایگاه داده، نیاز به کتابخونه PyMongo داریم. نحوه نصب و شروع کار کردن با اون رو اینجا ببین:
[نحوه نصب و آموزش PyMongo](https://pymongo.readthedocs.io/en/stable/tutorial.html)

### ذخیره ورودی و خروجی های مدل هوش مصنوعی در پایگاه داده
خب تا اینجا باید برنامه فلسک آماده داشته باشی، پایگاه داده نصب شده باشه و بلد باشی چطوری با PyMongo با پایگاه داده ارتباط داشته باشی و عملیات CRUD رو انجام بدی.
تسکی که الان باید انجام بدی اینه:
درخواست ها و پاسخ هایی که به کد سرور فلسک برای تشخیص احساسات  وارد و خارج میشه رو داخل این دیتابیس ذخیره کن. ابتدا مشخص کن که توی چه قالبی داده ها رو ذخیره میکنی؛ مثلاه یه شکلش این میتونه باشه:

```
{
  "text": "من خوشحالم",
  "sentiment": "positive",
  "timestamp": "2021-08-01-13:51:22"
}
```

حالا دو تا API توسعه بده:
1. متن بفرستی و نتایج رو بهت برگردونه
2. لیست تمامی درخواست های پیش بینی رو برگردونه