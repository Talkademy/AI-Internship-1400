<div dir="rtl" align='right'>

# تبدیل گفتار به متن
توی این مرحله، قراره که با روش های تبدیل گفتار به متن آشنا بشیم. با سرویس های آنلاین کار بکنیم، با شبکه های عصبی و پروژه هایی که برای این تسک توسعه داده شدن آشنا بشیم.
### اصول و روش ها
به دو صورت میتونیم گفتار رو تبدیل به متن کنیم: یکی اینکه از سرویس های آنلاین مثل گوگل استفاده کنیم، دوم اینکه از مدل های هوش مصنوعی بصورت آفلاین استفاده کنیم. ابتدا ببینیم چطوری با سرویس گوگل میشه این کارو کرد.
### دسترسی به سرویس تبدیل گفتار به متن گوگل
گوگل به صورت رایگان سرویس تبدیل گفتار به متن رو میده. از طریق کد زیر میتونی به سرویس گوگل وصل بشی و صدا رو تبدیل به متن کنی:

<div dir="ltr" align='left'>

```python
!pip install SpeechRecognition
import speech_recognition as sr
r = sr.Recognizer()
sf = sr.AudioFile('common_voice_fa_18202376.wav')
with sf as source:
    audio = r.record(source)

text = r.recognize_google(audio,language='fa-IR')
```

<div dir="rtl" align='right'>

توی این لینک میتونی اطلاعات بیشتری دریافت کنی:
[آموزش استفاده از سرویس های آنلاین برای تبدیل گفتار به متن](https://realpython.com/python-speech-recognition/)
### اتصال گوگل به رازا
تسک ابتدایی اینه: سرویس تبدیل گفتار به متن گوگل رو به رباتی که با رازا توسعه دادی وصل کن. در واقع یک  سرویس مبتنی بر API توسعه بده که فایل صدا رو دریافت میکنه، سپس از طریق سرویس های آنلاین اون رو تبدیل به متن میکنه، سپس به ربات رازا میده تا جواب مناسب رو تولید کنه، بعدش این جواب دریافتی رو به کاربر برمیگردونه.
### راه اندازی Vosk
همونطور که گفتیم، یک روش دیگه اینه که از پروژه های آفلاین استفاده کنی. Vosk یه پروژه متن باز هست که برای تبدیل گفتار به متن توسعه داده شده و برای زبان فارسی هم مدل از پیش آموزش شده ارائه کرده.
[مستندات پروژه Vosk](https://alphacephei.com/vosk/)

راه اندازی این پروژه ساده است. پروژه رو نصب و راه اندازی بکن. با Vosk میتونی هم فایل صوتی بدی که تبدیل به متن کنه، هم بصورت زنده از میکروفن سیستم صدا رو دریافت کنه و متنش رو استخراج کنه.

تسک بعدی اینه که Vosk رو به ربات رازا وصل کنی. از همون کدی که در مرحله ی قبل توسعه دادی میتونی استفاده کنی، ولی این دفعه بجای فرستادن فایل صوتی به سرویس گوگل، به سرور Vosk ارسال کنه و متن رو استخراج کنه.

# تبدیل متن به گفتار
این تسک برعکس تسک قبلی هست، یعنی متنی که داریم رو تبدیل به گفتار و صدا بکنیم. این تسک هم خیلی کاربردیه، مثلا توی دستیار های شخصی، نرم افزارهای مسیریابی، تلفن های گویا، ربات های انسان نما و ... . 
### روش های تبدیل متن به گفتار
دو روش کلی برای تبدیل متن به گفتار داریم: 1. گفتار هر کدام از کلمات رو تولید کنیم و یک دایره واژگان صوتی ایجاد کنیم. سپس در متن ورودی، صدای کلمات را از این دایره واژگان برداریم و کنار هم بگذاریم و صدای نهایی متن رو تولید کنیم. ایراد این روش، بریده بریده بودن صدا و لحن ثابت برای همه ی جملات هست، در واقع لحن جملات خبری، پرسشی، تعجبی و غیره متفاوت هست ولی در این روش، لحن و گویش یکسانی درست میشه. 2. از شبکه های عصبی و یادگیری عمیق برای تولید گفتار استفاده کنیم. این شبکه ها در واقع یک حالت Seq2Seq رو دارند و رشته متن ورودی رو به رشته صداها تبدیل میکنن. Tacotron معماری معروفی برای تبدیل متن به گفتار هست. 
### تبدیل گفتار به متن به روش درخت تصمیم
خب ابتدا روش اول رو انجام بدیم. اینجا بهش میگیم روش درخت تصمیم. یعنی هر کلمه رو میبینه و تصمیم میگیره از کدام صوت ها برای تولیدش استفاده کنه.
### تولید داده ها برای درخت تصمیم
در رباتی که در مرحله های قبلی با فریمورک رازا ساختی، یک تعداد پاسخ برای هر کدام از درخواست ها تولید کرده بودی. کلمات موجود در اون پاسخ ها رو استخراج کن، با صدای خودت اون کلمات رو بخون و ضبط کن و توی فایل سیستم نگه دار، توی دیتابیس مانگو هم یک سند و ساختاری ایجاد کن که آدرس هر کدوم از این فایل رو داشته باشه. بعدش یک برنامه توسعه بده که متن ورودی رو تبدیل به صوت کنه. دقت کن این برنامه باید بتونه اعداد رو هم به صوت تبدیل کنه. این برنامه رو با استفاده از Flask به یک سرویس تبدیل کن که از طریق API متن رو دریافت کنه و فایل صوتی خروجی بده.

حالا این برنامه رو به رباتی که با رازا توسعه دادی وصل کن. الان باید یک رباتی داشته باشی که صدا دریافت میکنه و صدا خروجی میده. در واقع یک دستیار صوتی مثل گوگل!

### روش یادگیری عمیق
در روش درخت تصمیم که پیاده سازی  کردی، دیدی که گفتار نهایی بصورت بریده بریده ست و یک حالت رباتیکی داره. برای رفع این مشکل و تولید یک صدای نزدیک به حالت طبیعی، معماری های شبکه ی عصبی عمیقی توسعه داده شده. این معماری ها به دو صورت هستند: 1. ابتدا با استفاده از یک شبکه ی عصبی، متن ورودی رو تبدیل به یک نمایش خاص به اسم Mel Spectogram میکنن. به این شبکه میگن Mel Spectogram Generator. سپس از یک شبکه ی عصبی دیگه ای استفاده میکنن تا Mel Spectogram رو تبدیل به موج صوتی بکنه. 2. روش انتها به انتها که متن ورودی رو دریافت میکنه و  موج صوت خروجی رو برمیگردونه.

برای آموزش این مدل ها نیاز هست که صدای تمیز و واضح یک گوینده به همراه متن هایی که  میگوید جمع آوری بشه.

* برای تسک های تبدیل متن به گفتار و همچنین گفتار به متن، مدل های مختلفی توسعه داده شده. به دلخواه، یکی از این تسک ها رو انتخاب کن، جستجو کن برای تسک دلخواهت، چه روش ها، معماری ها و فریمورک های مبتنی بر هوش مصنوعی و یادگیری عمیق وجود داره. در قالب پاورپوینت، نتیجه ی جستجوها رو گزارش کن، سپس یکی از این روش ها رو انتخاب کن و آموزش بده. 
